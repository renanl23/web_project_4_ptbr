!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e){var n=e.data,r=e.cardSelector,o=e.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._cardSelector=r,this._image=n.link,this._title=n.name,this._imageSelector="".concat(this._cardSelector,"__image"),this._titleSelector="".concat(this._cardSelector,"__title"),this._trashSelector="".concat(this._cardSelector,"__trash"),this._likeSelector="".concat(this._cardSelector,"__like"),this._handleCardClick=o}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector("template").content.querySelector(this._cardSelector).cloneNode(!0)}},{key:"_handleLikeEvent",value:function(e){var t="".concat(this._likeSelector).replace(".","");e.target.classList.toggle(t+"_clicked")}},{key:"_handleTrashEvent",value:function(e){e.target.parentElement.remove()}},{key:"_setEventLikeButton",value:function(){var e=this;this._element.querySelector("".concat(this._likeSelector)).addEventListener("click",(function(t){e._handleLikeEvent(t)}))}},{key:"_setEventImage",value:function(){var e=this;this._element.querySelector("".concat(this._imageSelector)).addEventListener("click",(function(){e._handleCardClick()}))}},{key:"_setEventTrashButton",value:function(){var e=this;this._element.querySelector("".concat(this._trashSelector)).addEventListener("click",(function(t){e._handleTrashEvent(t)}))}},{key:"_setEventListeners",value:function(){this._setEventImage(),this._setEventLikeButton(),this._setEventTrashButton()}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector("".concat(this._imageSelector)).src=this._image,this._element.querySelector("".concat(this._imageSelector)).alt=this._title,this._element.querySelector("".concat(this._titleSelector)).textContent=this._title,this._element}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){var r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=function(e){return Array.from(e).some((function(e){return!e.validity.valid}))},(r="_hasInvalidInput")in this?Object.defineProperty(this,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[r]=o,this._formElement=n,this._formSelector=t.formSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._inputList=Array.from(this._formElement.querySelectorAll(t.inputSelector)),this._buttonElement=this._formElement.querySelector(t.submitButtonSelector)}var t,r;return t=e,(r=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"disableButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?this.disableButton():(t.classList.remove(this._inactiveButtonClass),t.removeAttribute("disabled"))}},{key:"_resetFormInputsError",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners(),this._resetFormInputsError()}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(this._inputList,this._buttonElement),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState(e._inputList,e._buttonElement)}))}))}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this.container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this.container.append(e)}},{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._element=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this._element.closest(".modal").classList.add("modal_opened")}},{key:"close",value:function(){this._element.closest(".modal").classList.remove("modal_opened")}},{key:"_handleEscClose",value:function(){var e=this;document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.close()}))}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".modal__close").addEventListener("click",(function(){e.close()})),this._element.addEventListener("click",(function(t){t.target.closest(".modal__image")||t.target.closest(".modal__content")||e.close()})),this._handleEscClose()}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=f(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},u.apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(l,e);var t,n,r,o,i=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),i.call(this,e)}return t=l,(n=[{key:"open",value:function(e){u(_(l.prototype),"open",this).call(this),this._element.classList.add("modal__fig_opened"),this._card=e,this._element.querySelector(".modal__image").src=this._card.querySelector(".element__image").src,this._element.querySelector(".modal__image").alt=this._card.querySelector(".element__title").textContent,this._element.querySelector(".modal__figcaption").textContent=this._card.querySelector(".element__title").textContent}},{key:"close",value:function(){u(_(l.prototype),"close",this).call(this),this._element.classList.remove("modal__fig_opened")}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(a);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=b(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},v.apply(this,arguments)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function E(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(l,e);var t,n,r,o,i=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(o){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function l(e){var t,n=e.popupSelector,r=e.formSelector,o=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,n))._formElement=document.querySelector(r),t._handleFormSubmit=o,t}return t=l,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._formElement.querySelectorAll(".modal__input-text"),this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;v(g(l.prototype),"_setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()}))}},{key:"open",value:function(){v(g(l.prototype),"open",this).call(this),this._formElement.classList.add("modal__content_opened")}},{key:"close",value:function(){v(g(l.prototype),"close",this).call(this),this._formElement.classList.remove("modal__content_opened"),this._formElement.reset()}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(a);function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(t){var n=t.titleSelector,r=t.subtitleSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._title=document.querySelector(n),this._subtitle=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._formValues={title:this._title.textContent,subtitle:this._subtitle.textContent},this._formValues}},{key:"setUserInfo",value:function(e){this._title.textContent=e.profilename,this._subtitle.textContent=e.profilesubtitle}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),O={inputSelector:".modal__input-text",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_inactive",inputErrorClass:"modal__input-text_error",errorClass:"modal__input-error_active"},C=".elements";function j(e){var n=new t({data:e,cardSelector:".element",handleCardClick:function(){var e=new h(".modal__fig");e._setEventListeners(),e.open(n)}}).generateCard();return n}var P=new i({items:[{name:"Vale de Yosemite",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lago Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Montanhas Carecas",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Parque Nacional da Vanoise ",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:function(e){var t=j(e);P.addItem(t)}},C);P.renderItems();var q=new k({popupSelector:"#formEditProfile",formSelector:'[name="form__edit-profile"]',handleFormSubmit:function(e){new L({titleSelector:".profile__title",subtitleSelector:".profile__subtitle"}).setUserInfo(e)}});document.querySelector(".profile__edit").addEventListener("click",(function(){q.open();var e=new L({titleSelector:".profile__title",subtitleSelector:".profile__subtitle"}).getUserInfo();document.querySelector("#profilename").value=e.title,document.querySelector("#profilesubtitle").value=e.subtitle})),q.setEventListeners();var I=new k({popupSelector:"#formAddLocal",formSelector:'[name="form__add-local"]',handleFormSubmit:function(e){var t=j(e);document.querySelector(C).prepend(t)}});I.setEventListeners(),document.querySelector(".profile__add").addEventListener("click",(function(){I.open()})),new r(O,document.forms.formAddLocal).enableValidation(),new r(O,document.forms.formEditProfile).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y2lFLEdBQWNnRCxRQUFRaEMsRUFDL0MsSUFHRitCLEVBQWFELG9CQUdLaEgsU0FBU0MsY0FBYyxpQkFDL0JZLGlCQUFpQixTQUFTLFdBQ2xDb0csRUFBYVYsTUFDZixJQUk2QixJQUFJL0UsRUFDL0JDLEVBQ0F6QixTQUFTbUgsTUFBTUMsY0FFSUMsbUJBRVksSUFBSTdGLEVBQ25DQyxFQUNBekIsU0FBU21ILE1BQU1HLGlCQUVRRCxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljayB9KSB7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbWFnZSA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX3RpdGxlID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5faW1hZ2VTZWxlY3RvciA9IGAke3RoaXMuX2NhcmRTZWxlY3Rvcn1fX2ltYWdlYDtcclxuICAgIHRoaXMuX3RpdGxlU2VsZWN0b3IgPSBgJHt0aGlzLl9jYXJkU2VsZWN0b3J9X190aXRsZWA7XHJcbiAgICB0aGlzLl90cmFzaFNlbGVjdG9yID0gYCR7dGhpcy5fY2FyZFNlbGVjdG9yfV9fdHJhc2hgO1xyXG4gICAgdGhpcy5fbGlrZVNlbGVjdG9yID0gYCR7dGhpcy5fY2FyZFNlbGVjdG9yfV9fbGlrZWA7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwidGVtcGxhdGVcIilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2VFdmVudChldnQpIHtcclxuICAgIGNvbnN0IGNsYXNzTGlrZVNlbGVjdG9yID0gYCR7dGhpcy5fbGlrZVNlbGVjdG9yfWAucmVwbGFjZShcIi5cIiwgXCJcIik7XHJcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoY2xhc3NMaWtlU2VsZWN0b3IgKyBcIl9jbGlja2VkXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZVRyYXNoRXZlbnQoZXZ0KSB7XHJcbiAgICBldnQudGFyZ2V0LnBhcmVudEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaWtlQnV0dG9uKCkge1xyXG4gICAgY29uc3QgbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihgJHt0aGlzLl9saWtlU2VsZWN0b3J9YCk7XHJcbiAgICBsaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VFdmVudChldnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRJbWFnZSgpIHtcclxuICAgIGNvbnN0IGltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKGAke3RoaXMuX2ltYWdlU2VsZWN0b3J9YCk7XHJcbiAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50VHJhc2hCdXR0b24oKSB7XHJcbiAgICBjb25zdCB0cmFzaEJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihgJHt0aGlzLl90cmFzaFNlbGVjdG9yfWApO1xyXG4gICAgdHJhc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlVHJhc2hFdmVudChldnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudEltYWdlKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpa2VCdXR0b24oKTtcclxuICAgIHRoaXMuX3NldEV2ZW50VHJhc2hCdXR0b24oKTtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihgJHt0aGlzLl9pbWFnZVNlbGVjdG9yfWApLnNyYyA9IHRoaXMuX2ltYWdlO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKGAke3RoaXMuX2ltYWdlU2VsZWN0b3J9YCkuYWx0ID0gdGhpcy5fdGl0bGU7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7dGhpcy5fdGl0bGVTZWxlY3Rvcn1gKS50ZXh0Q29udGVudCA9XHJcbiAgICAgIHRoaXMuX3RpdGxlO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoZm9ybU9iamVjdCwgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBmb3JtT2JqZWN0LmZvcm1TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBmb3JtT2JqZWN0LmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBmb3JtT2JqZWN0LmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBmb3JtT2JqZWN0LmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGZvcm1PYmplY3QuaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgZm9ybU9iamVjdC5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbShpbnB1dExpc3QpLnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfcmVzZXRGb3JtSW5wdXRzRXJyb3IoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9yZXNldEZvcm1JbnB1dHNFcnJvcigpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUodGhpcy5faW5wdXRMaXN0LCB0aGlzLl9idXR0b25FbGVtZW50KTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0TGlzdCwgdGhpcy5fYnV0dG9uRWxlbWVudCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGxpc3RTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihsaXN0U2VsZWN0b3IpO1xyXG4gIH1cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcclxuICB9XHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQuY2xvc2VzdChcIi5tb2RhbFwiKS5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LmNsb3Nlc3QoXCIubW9kYWxcIikuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSgpIHtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICAhZXZ0LnRhcmdldC5jbG9zZXN0KFwiLm1vZGFsX19pbWFnZVwiKSAmJlxyXG4gICAgICAgICFldnQudGFyZ2V0LmNsb3Nlc3QoXCIubW9kYWxfX2NvbnRlbnRcIilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSgpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbihjYXJkRWxlbWVudCkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfX2ZpZ19vcGVuZWRcIik7XHJcbiAgICB0aGlzLl9jYXJkID0gY2FyZEVsZW1lbnQ7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpLnNyYyA9XHJcbiAgICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWFnZVwiKS5zcmM7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpLmFsdCA9XHJcbiAgICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190aXRsZVwiKS50ZXh0Q29udGVudDtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZmlnY2FwdGlvblwiKS50ZXh0Q29udGVudCA9XHJcbiAgICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190aXRsZVwiKS50ZXh0Q29udGVudDtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfX2ZpZ19vcGVuZWRcIik7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGZvcm1TZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihmb3JtU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dC10ZXh0XCIpO1xyXG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfX2NvbnRlbnRfb3BlbmVkXCIpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX19jb250ZW50X29wZW5lZFwiKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IHRpdGxlU2VsZWN0b3IsIHN1YnRpdGxlU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRpdGxlU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc3VidGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHN1YnRpdGxlU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge1xyXG4gICAgICB0aXRsZTogdGhpcy5fdGl0bGUudGV4dENvbnRlbnQsXHJcbiAgICAgIHN1YnRpdGxlOiB0aGlzLl9zdWJ0aXRsZS50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKGRhdGEpIHtcclxuICAgIHRoaXMuX3RpdGxlLnRleHRDb250ZW50ID0gZGF0YS5wcm9maWxlbmFtZTtcclxuICAgIHRoaXMuX3N1YnRpdGxlLnRleHRDb250ZW50ID0gZGF0YS5wcm9maWxlc3VidGl0bGU7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvblwiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2VcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybVwiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm9cIjtcclxuXHJcbi8vIENvbnN0YW50ZXNcclxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFsZSBkZSBZb3NlbWl0ZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIk1vbnRhbmhhcyBDYXJlY2FzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlBhcnF1ZSBOYWNpb25hbCBkYSBWYW5vaXNlIFwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5jb25zdCBmb3JtT2JqZWN0ID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dC10ZXh0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25faW5hY3RpdmVcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LXRleHRfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcclxufTtcclxuY29uc3QgbGlzdFNlbGVjdG9yID0gXCIuZWxlbWVudHNcIjtcclxuLy8gUmVuZGVyaXphIGltYWdlbnMgbmEgcMOhZ2luYVxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmRJdGVtKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcclxuICAgIGRhdGE6IGNhcmRJdGVtLFxyXG4gICAgY2FyZFNlbGVjdG9yOiBcIi5lbGVtZW50XCIsXHJcbiAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcclxuICAgICAgY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5tb2RhbF9fZmlnXCIpO1xyXG4gICAgICBpbWFnZVBvcHVwLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICBpbWFnZVBvcHVwLm9wZW4oY2FyZEVsZW1lbnQpO1xyXG4gICAgfSxcclxuICB9KTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogKGNhcmRJdGVtKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkSXRlbSk7XHJcbiAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIGxpc3RTZWxlY3RvclxyXG4pO1xyXG5jYXJkTGlzdC5yZW5kZXJJdGVtcygpO1xyXG5cclxuLy8gSW1wbGVtZW50YSBvIHBvcHVwIGRlIEVkacOnw6NvIGRlIFBlcmZpbFxyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIiNmb3JtRWRpdFByb2ZpbGVcIixcclxuICBmb3JtU2VsZWN0b3I6ICdbbmFtZT1cImZvcm1fX2VkaXQtcHJvZmlsZVwiXScsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGl0ZW0pID0+IHtcclxuICAgIGNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICAgICAgdGl0bGVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICAgICAgc3VidGl0bGVTZWxlY3RvcjogXCIucHJvZmlsZV9fc3VidGl0bGVcIixcclxuICAgIH0pO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oaXRlbSk7XHJcbiAgfSxcclxufSk7XHJcblxyXG4vLyBJbXBsZW1lbnRhIGJvdGFvIGRlIEVkacOnw6NvIGRlIFBlcmZpbFxyXG5jb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdFwiKTtcclxuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTtcclxuICBjb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgICB0aXRsZVNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZVwiLFxyXG4gICAgc3VidGl0bGVTZWxlY3RvcjogXCIucHJvZmlsZV9fc3VidGl0bGVcIixcclxuICB9KTtcclxuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlbmFtZVwiKS52YWx1ZSA9IHVzZXJEYXRhLnRpdGxlO1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZXN1YnRpdGxlXCIpLnZhbHVlID0gdXNlckRhdGEuc3VidGl0bGU7XHJcbn0pO1xyXG4vLyBJbXBsZW1lbnRhIEV2ZW50IExpc3RlbmVyIGRlIFBvcHVwIGRlIEVkacOnw6NvIFBlcmZpbFxyXG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBJbXBsZW1lbnRhIG8gcG9wdXAgZGUgQWRpY2lvbmFyIENhcmRcclxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiI2Zvcm1BZGRMb2NhbFwiLFxyXG4gIGZvcm1TZWxlY3RvcjogJ1tuYW1lPVwiZm9ybV9fYWRkLWxvY2FsXCJdJyxcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoY2FyZEl0ZW0pID0+IHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkSXRlbSk7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGxpc3RTZWxlY3RvcikucHJlcGVuZChjYXJkRWxlbWVudCk7XHJcbiAgfSxcclxufSk7XHJcbi8vIEltcGxlbWVudGEgRXZlbnQgTGlzdGVuZXIgZGUgUG9wdXAgZGUgQWRpY2lvbmFyIENhcmRcclxuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBJbXBsZW1lbnRhIGJvdGFvIGRlIEFkaWNpb25hciBDYXJkXHJcbmNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkXCIpO1xyXG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRDYXJkUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbi8vIFZhbGlkYcOnw7Vlc1xyXG5cclxuY29uc3QgYWRkQ2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBmb3JtT2JqZWN0LFxyXG4gIGRvY3VtZW50LmZvcm1zLmZvcm1BZGRMb2NhbFxyXG4pO1xyXG5hZGRDYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBmb3JtT2JqZWN0LFxyXG4gIGRvY3VtZW50LmZvcm1zLmZvcm1FZGl0UHJvZmlsZVxyXG4pO1xyXG5lZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJ0aGlzIiwiX2NhcmRTZWxlY3RvciIsIl9pbWFnZSIsImxpbmsiLCJfdGl0bGUiLCJuYW1lIiwiX2ltYWdlU2VsZWN0b3IiLCJfdGl0bGVTZWxlY3RvciIsIl90cmFzaFNlbGVjdG9yIiwiX2xpa2VTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZXZ0IiwiY2xhc3NMaWtlU2VsZWN0b3IiLCJyZXBsYWNlIiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicGFyZW50RWxlbWVudCIsInJlbW92ZSIsIl9lbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlRXZlbnQiLCJfaGFuZGxlVHJhc2hFdmVudCIsIl9zZXRFdmVudEltYWdlIiwiX3NldEV2ZW50TGlrZUJ1dHRvbiIsIl9zZXRFdmVudFRyYXNoQnV0dG9uIiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybU9iamVjdCIsImZvcm1FbGVtZW50IiwiaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwic29tZSIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJfZm9ybUVsZW1lbnQiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImFkZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwic2V0QXR0cmlidXRlIiwiYnV0dG9uRWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwicmVtb3ZlQXR0cmlidXRlIiwiZm9yRWFjaCIsInByZXZlbnREZWZhdWx0IiwiX3Jlc2V0Rm9ybUlucHV0c0Vycm9yIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIlNlY3Rpb24iLCJsaXN0U2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJjb250YWluZXIiLCJlbGVtZW50IiwiYXBwZW5kIiwiaXRlbSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImNsb3Nlc3QiLCJrZXkiLCJjbG9zZSIsIl9oYW5kbGVFc2NDbG9zZSIsIlBvcHVwV2l0aEltYWdlIiwiY2FyZEVsZW1lbnQiLCJfY2FyZCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlVzZXJJbmZvIiwidGl0bGVTZWxlY3RvciIsInN1YnRpdGxlU2VsZWN0b3IiLCJfc3VidGl0bGUiLCJ0aXRsZSIsInN1YnRpdGxlIiwicHJvZmlsZW5hbWUiLCJwcm9maWxlc3VidGl0bGUiLCJjcmVhdGVDYXJkIiwiY2FyZEl0ZW0iLCJpbWFnZVBvcHVwIiwib3BlbiIsImdlbmVyYXRlQ2FyZCIsImNhcmRMaXN0IiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwiZWRpdFByb2ZpbGVQb3B1cCIsInNldFVzZXJJbmZvIiwidXNlckRhdGEiLCJnZXRVc2VySW5mbyIsInNldEV2ZW50TGlzdGVuZXJzIiwiYWRkQ2FyZFBvcHVwIiwicHJlcGVuZCIsImZvcm1zIiwiZm9ybUFkZExvY2FsIiwiZW5hYmxlVmFsaWRhdGlvbiIsImZvcm1FZGl0UHJvZmlsZSJdLCJzb3VyY2VSb290IjoiIn0=