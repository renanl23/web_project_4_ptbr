!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e){var n=e.data,r=e.cardSelector,o=e.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._cardSelector=r,this._image=n.link,this._title=n.name,this._imageSelector="".concat(this._cardSelector,"__image"),this._titleSelector="".concat(this._cardSelector,"__title"),this._trashSelector="".concat(this._cardSelector,"__trash"),this._likeSelector="".concat(this._cardSelector,"__like"),this._handleCardClick=o}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector("template").content.querySelector(this._cardSelector).cloneNode(!0)}},{key:"_handleLikeEvent",value:function(e){var t="".concat(this._likeSelector).replace(".","");e.target.classList.toggle(t+"_clicked")}},{key:"_handleTrashEvent",value:function(e){e.target.parentElement.remove()}},{key:"_setEventLikeButton",value:function(){var e=this;this._element.querySelector("".concat(this._likeSelector)).addEventListener("click",(function(t){e._handleLikeEvent(t)}))}},{key:"_setEventImage",value:function(){var e=this;this._element.querySelector("".concat(this._imageSelector)).addEventListener("click",(function(){e._handleCardClick()}))}},{key:"_setEventTrashButton",value:function(){var e=this;this._element.querySelector("".concat(this._trashSelector)).addEventListener("click",(function(t){e._handleTrashEvent(t)}))}},{key:"_setEventListeners",value:function(){this._setEventImage(),this._setEventLikeButton(),this._setEventTrashButton()}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector("".concat(this._imageSelector)).src=this._image,this._element.querySelector("".concat(this._imageSelector)).alt=this._title,this._element.querySelector("".concat(this._titleSelector)).textContent=this._title,this._element}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){var r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=function(e){return Array.from(e).some((function(e){return!e.validity.valid}))},(r="_hasInvalidInput")in this?Object.defineProperty(this,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[r]=o,this._formElement=n,this._formSelector=t.formSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._inputList=Array.from(this._formElement.querySelectorAll(t.inputSelector)),this._buttonElement=this._formElement.querySelector(t.submitButtonSelector)}var t,r;return t=e,(r=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"disableButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?this.disableButton():(t.classList.remove(this._inactiveButtonClass),t.removeAttribute("disabled"))}},{key:"_resetFormInputsError",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners(),this._resetFormInputsError()}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(this._inputList,this._buttonElement),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState(e._inputList,e._buttonElement)}))}))}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this.container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this.container.append(e)}},{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._element=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this._element.closest(".modal").classList.add("modal_opened")}},{key:"close",value:function(){this._element.closest(".modal").classList.remove("modal_opened")}},{key:"_handleEscClose",value:function(){var e=this;document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.close()}))}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".modal__close").addEventListener("click",(function(){e.close()})),this._element.addEventListener("click",(function(t){t.target.closest(".modal__image")||t.target.closest(".modal__content")||e.close()})),this._handleEscClose()}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=f(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},u.apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(l,e);var t,n,r,o,i=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),i.call(this,e)}return t=l,(n=[{key:"open",value:function(e){u(_(l.prototype),"open",this).call(this),this._element.classList.add("modal__fig_opened"),this._card=e,this._element.querySelector(".modal__image").src=this._card.querySelector(".element__image").src,this._element.querySelector(".modal__image").alt=this._card.querySelector(".element__title").textContent,this._element.querySelector(".modal__figcaption").textContent=this._card.querySelector(".element__title").textContent}},{key:"close",value:function(){u(_(l.prototype),"close",this).call(this),this._element.classList.remove("modal__fig_opened")}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(a);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=b(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},v.apply(this,arguments)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function E(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(l,e);var t,n,r,o,i=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(o){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function l(e){var t,n=e.popupSelector,r=e.formSelector,o=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,n))._formElement=document.querySelector(r),t._handleFormSubmit=o,t}return t=l,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._formElement.querySelectorAll(".modal__input-text"),this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;v(g(l.prototype),"_setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()}))}},{key:"open",value:function(){v(g(l.prototype),"open",this).call(this),this._formElement.classList.add("modal__content_opened")}},{key:"close",value:function(){v(g(l.prototype),"close",this).call(this),this._formElement.classList.remove("modal__content_opened"),this._formElement.reset()}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(a);function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(t){var n=t.titleSelector,r=t.subtitleSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._title=document.querySelector(n),this._subtitle=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._formValues={title:this._title.textContent,subtitle:this._subtitle.textContent},this._formValues}},{key:"setUserInfo",value:function(e){this._title.textContent=e.profilename,this._subtitle.textContent=e.profilesubtitle}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),O={inputSelector:".modal__input-text",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_inactive",inputErrorClass:"modal__input-text_error",errorClass:"modal__input-error_active"};function C(e){var n=new t({data:e,cardSelector:".element",handleCardClick:function(){var e=new h(".modal__fig");e._setEventListeners(),e.open(n)}}).generateCard();return n}var j=new i({items:[{name:"Vale de Yosemite",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lago Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Montanhas Carecas",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Parque Nacional da Vanoise ",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:function(e){var t=C(e);j.addItem(t)}},".elements");j.renderItems();var P=new k({popupSelector:"#formEditProfile",formSelector:'[name="form__edit-profile"]',handleFormSubmit:function(e){new L({titleSelector:".profile__title",subtitleSelector:".profile__subtitle"}).setUserInfo(e)}});document.querySelector(".profile__edit").addEventListener("click",(function(){P.open();var e=new L({titleSelector:".profile__title",subtitleSelector:".profile__subtitle"}).getUserInfo();document.querySelector("#profilename").value=e.title,document.querySelector("#profilesubtitle").value=e.subtitle})),P.setEventListeners();var q=new k({popupSelector:"#formAddLocal",formSelector:'[name="form__add-local"]',handleFormSubmit:function(e){var t=C(e);document.querySelector(containerSelector).prepend(t)}});q.setEventListeners(),document.querySelector(".profile__add").addEventListener("click",(function(){q.open()})),new r(O,document.forms.formAddLocal).enableValidation(),new r(O,document.forms.formEditProfile).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFFBQVFqQyxFQUNwRCxJQUdGK0IsRUFBYUQsb0JBR0toSCxTQUFTQyxjQUFjLGlCQUMvQlksaUJBQWlCLFNBQVMsV0FDbENvRyxFQUFhVixNQUNmLElBSTZCLElBQUkvRSxFQUMvQkMsRUFDQXpCLFNBQVNvSCxNQUFNQyxjQUVJQyxtQkFFWSxJQUFJOUYsRUFDbkNDLEVBQ0F6QixTQUFTb0gsTUFBTUcsaUJBRVFELGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrIH0pIHtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2ltYWdlID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fdGl0bGUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9pbWFnZVNlbGVjdG9yID0gYCR7dGhpcy5fY2FyZFNlbGVjdG9yfV9faW1hZ2VgO1xyXG4gICAgdGhpcy5fdGl0bGVTZWxlY3RvciA9IGAke3RoaXMuX2NhcmRTZWxlY3Rvcn1fX3RpdGxlYDtcclxuICAgIHRoaXMuX3RyYXNoU2VsZWN0b3IgPSBgJHt0aGlzLl9jYXJkU2VsZWN0b3J9X190cmFzaGA7XHJcbiAgICB0aGlzLl9saWtlU2VsZWN0b3IgPSBgJHt0aGlzLl9jYXJkU2VsZWN0b3J9X19saWtlYDtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCJ0ZW1wbGF0ZVwiKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUV2ZW50KGV2dCkge1xyXG4gICAgY29uc3QgY2xhc3NMaWtlU2VsZWN0b3IgPSBgJHt0aGlzLl9saWtlU2VsZWN0b3J9YC5yZXBsYWNlKFwiLlwiLCBcIlwiKTtcclxuICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShjbGFzc0xpa2VTZWxlY3RvciArIFwiX2NsaWNrZWRcIik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlVHJhc2hFdmVudChldnQpIHtcclxuICAgIGV2dC50YXJnZXQucGFyZW50RWxlbWVudC5yZW1vdmUoKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpa2VCdXR0b24oKSB7XHJcbiAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKGAke3RoaXMuX2xpa2VTZWxlY3Rvcn1gKTtcclxuICAgIGxpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUV2ZW50KGV2dCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudEltYWdlKCkge1xyXG4gICAgY29uc3QgaW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7dGhpcy5faW1hZ2VTZWxlY3Rvcn1gKTtcclxuICAgIGltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljaygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRUcmFzaEJ1dHRvbigpIHtcclxuICAgIGNvbnN0IHRyYXNoQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKGAke3RoaXMuX3RyYXNoU2VsZWN0b3J9YCk7XHJcbiAgICB0cmFzaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVUcmFzaEV2ZW50KGV2dCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3NldEV2ZW50SW1hZ2UoKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlrZUJ1dHRvbigpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRUcmFzaEJ1dHRvbigpO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKGAke3RoaXMuX2ltYWdlU2VsZWN0b3J9YCkuc3JjID0gdGhpcy5faW1hZ2U7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7dGhpcy5faW1hZ2VTZWxlY3Rvcn1gKS5hbHQgPSB0aGlzLl90aXRsZTtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihgJHt0aGlzLl90aXRsZVNlbGVjdG9yfWApLnRleHRDb250ZW50ID1cclxuICAgICAgdGhpcy5fdGl0bGU7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihmb3JtT2JqZWN0LCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGZvcm1PYmplY3QuZm9ybVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGZvcm1PYmplY3QuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGZvcm1PYmplY3QuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGZvcm1PYmplY3QuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZm9ybU9iamVjdC5pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBmb3JtT2JqZWN0LnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKGlucHV0TGlzdCkuc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xyXG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9yZXNldEZvcm1JbnB1dHNFcnJvcigpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3Jlc2V0Rm9ybUlucHV0c0Vycm9yKCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dExpc3QsIHRoaXMuX2J1dHRvbkVsZW1lbnQpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUodGhpcy5faW5wdXRMaXN0LCB0aGlzLl9idXR0b25FbGVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgbGlzdFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGxpc3RTZWxlY3Rvcik7XHJcbiAgfVxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5jbG9zZXN0KFwiLm1vZGFsXCIpLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQuY2xvc2VzdChcIi5tb2RhbFwiKS5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKCkge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgICFldnQudGFyZ2V0LmNsb3Nlc3QoXCIubW9kYWxfX2ltYWdlXCIpICYmXHJcbiAgICAgICAgIWV2dC50YXJnZXQuY2xvc2VzdChcIi5tb2RhbF9fY29udGVudFwiKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKGNhcmRFbGVtZW50KSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9fZmlnX29wZW5lZFwiKTtcclxuICAgIHRoaXMuX2NhcmQgPSBjYXJkRWxlbWVudDtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIikuc3JjID1cclxuICAgICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpLnNyYztcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIikuYWx0ID1cclxuICAgICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3RpdGxlXCIpLnRleHRDb250ZW50O1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19maWdjYXB0aW9uXCIpLnRleHRDb250ZW50ID1cclxuICAgICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3RpdGxlXCIpLnRleHRDb250ZW50O1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9fZmlnX29wZW5lZFwiKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgZm9ybVNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0LXRleHRcIik7XHJcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9fY29udGVudF9vcGVuZWRcIik7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfX2NvbnRlbnRfb3BlbmVkXCIpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgdGl0bGVTZWxlY3Rvciwgc3VidGl0bGVTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl90aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGl0bGVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9zdWJ0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc3VidGl0bGVTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7XHJcbiAgICAgIHRpdGxlOiB0aGlzLl90aXRsZS50ZXh0Q29udGVudCxcclxuICAgICAgc3VidGl0bGU6IHRoaXMuX3N1YnRpdGxlLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oZGF0YSkge1xyXG4gICAgdGhpcy5fdGl0bGUudGV4dENvbnRlbnQgPSBkYXRhLnByb2ZpbGVuYW1lO1xyXG4gICAgdGhpcy5fc3VidGl0bGUudGV4dENvbnRlbnQgPSBkYXRhLnByb2ZpbGVzdWJ0aXRsZTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZVwiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mb1wiO1xyXG5cclxuLy8gQ29uc3RhbnRlc1xyXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYWxlIGRlIFlvc2VtaXRlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTW9udGFuaGFzIENhcmVjYXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiUGFycXVlIE5hY2lvbmFsIGRhIFZhbm9pc2UgXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmNvbnN0IGZvcm1PYmplY3QgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0LXRleHRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9pbmFjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXQtdGV4dF9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG59O1xyXG5cclxuLy8gUmVuZGVyaXphIGltYWdlbnMgbmEgcMOhZ2luYVxyXG5jb25zdCBsaXN0U2VsZWN0b3IgPSBcIi5lbGVtZW50c1wiO1xyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmRJdGVtKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcclxuICAgIGRhdGE6IGNhcmRJdGVtLFxyXG4gICAgY2FyZFNlbGVjdG9yOiBcIi5lbGVtZW50XCIsXHJcbiAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcclxuICAgICAgY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5tb2RhbF9fZmlnXCIpO1xyXG4gICAgICBpbWFnZVBvcHVwLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICBpbWFnZVBvcHVwLm9wZW4oY2FyZEVsZW1lbnQpO1xyXG4gICAgfSxcclxuICB9KTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogKGNhcmRJdGVtKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkSXRlbSk7XHJcbiAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIGxpc3RTZWxlY3RvclxyXG4pO1xyXG5jYXJkTGlzdC5yZW5kZXJJdGVtcygpO1xyXG5cclxuLy8gSW1wbGVtZW50YSBvIHBvcHVwIGRlIEVkacOnw6NvIGRlIFBlcmZpbFxyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIiNmb3JtRWRpdFByb2ZpbGVcIixcclxuICBmb3JtU2VsZWN0b3I6ICdbbmFtZT1cImZvcm1fX2VkaXQtcHJvZmlsZVwiXScsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGl0ZW0pID0+IHtcclxuICAgIGNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICAgICAgdGl0bGVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICAgICAgc3VidGl0bGVTZWxlY3RvcjogXCIucHJvZmlsZV9fc3VidGl0bGVcIixcclxuICAgIH0pO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oaXRlbSk7XHJcbiAgfSxcclxufSk7XHJcblxyXG4vLyBJbXBsZW1lbnRhIGJvdGFvIGRlIEVkacOnw6NvIGRlIFBlcmZpbFxyXG5jb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdFwiKTtcclxuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTtcclxuICBjb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgICB0aXRsZVNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZVwiLFxyXG4gICAgc3VidGl0bGVTZWxlY3RvcjogXCIucHJvZmlsZV9fc3VidGl0bGVcIixcclxuICB9KTtcclxuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlbmFtZVwiKS52YWx1ZSA9IHVzZXJEYXRhLnRpdGxlO1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZXN1YnRpdGxlXCIpLnZhbHVlID0gdXNlckRhdGEuc3VidGl0bGU7XHJcbn0pO1xyXG4vLyBJbXBsZW1lbnRhIEV2ZW50IExpc3RlbmVyIGRlIFBvcHVwIGRlIEVkacOnw6NvIFBlcmZpbFxyXG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBJbXBsZW1lbnRhIG8gcG9wdXAgZGUgQWRpY2lvbmFyIENhcmRcclxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiI2Zvcm1BZGRMb2NhbFwiLFxyXG4gIGZvcm1TZWxlY3RvcjogJ1tuYW1lPVwiZm9ybV9fYWRkLWxvY2FsXCJdJyxcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoY2FyZEl0ZW0pID0+IHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkSXRlbSk7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKS5wcmVwZW5kKGNhcmRFbGVtZW50KTtcclxuICB9LFxyXG59KTtcclxuLy8gSW1wbGVtZW50YSBFdmVudCBMaXN0ZW5lciBkZSBQb3B1cCBkZSBBZGljaW9uYXIgQ2FyZFxyXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vIEltcGxlbWVudGEgYm90YW8gZGUgQWRpY2lvbmFyIENhcmRcclxuY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGRcIik7XHJcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLy8gVmFsaWRhw6fDtWVzXHJcblxyXG5jb25zdCBhZGRDYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIGZvcm1PYmplY3QsXHJcbiAgZG9jdW1lbnQuZm9ybXMuZm9ybUFkZExvY2FsXHJcbik7XHJcbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIGZvcm1PYmplY3QsXHJcbiAgZG9jdW1lbnQuZm9ybXMuZm9ybUVkaXRQcm9maWxlXHJcbik7XHJcbmVkaXRQcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsInRoaXMiLCJfY2FyZFNlbGVjdG9yIiwiX2ltYWdlIiwibGluayIsIl90aXRsZSIsIm5hbWUiLCJfaW1hZ2VTZWxlY3RvciIsIl90aXRsZVNlbGVjdG9yIiwiX3RyYXNoU2VsZWN0b3IiLCJfbGlrZVNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJldnQiLCJjbGFzc0xpa2VTZWxlY3RvciIsInJlcGxhY2UiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJwYXJlbnRFbGVtZW50IiwicmVtb3ZlIiwiX2VsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VFdmVudCIsIl9oYW5kbGVUcmFzaEV2ZW50IiwiX3NldEV2ZW50SW1hZ2UiLCJfc2V0RXZlbnRMaWtlQnV0dG9uIiwiX3NldEV2ZW50VHJhc2hCdXR0b24iLCJfZ2V0VGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtT2JqZWN0IiwiZm9ybUVsZW1lbnQiLCJpbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJzb21lIiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9mb3JtRWxlbWVudCIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiX2J1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiYWRkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJzZXRBdHRyaWJ1dGUiLCJidXR0b25FbGVtZW50IiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVCdXR0b24iLCJyZW1vdmVBdHRyaWJ1dGUiLCJmb3JFYWNoIiwicHJldmVudERlZmF1bHQiLCJfcmVzZXRGb3JtSW5wdXRzRXJyb3IiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiU2VjdGlvbiIsImxpc3RTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsImNvbnRhaW5lciIsImVsZW1lbnQiLCJhcHBlbmQiLCJpdGVtIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiY2xvc2VzdCIsImtleSIsImNsb3NlIiwiX2hhbmRsZUVzY0Nsb3NlIiwiUG9wdXBXaXRoSW1hZ2UiLCJjYXJkRWxlbWVudCIsIl9jYXJkIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiVXNlckluZm8iLCJ0aXRsZVNlbGVjdG9yIiwic3VidGl0bGVTZWxlY3RvciIsIl9zdWJ0aXRsZSIsInRpdGxlIiwic3VidGl0bGUiLCJwcm9maWxlbmFtZSIsInByb2ZpbGVzdWJ0aXRsZSIsImNyZWF0ZUNhcmQiLCJjYXJkSXRlbSIsImltYWdlUG9wdXAiLCJvcGVuIiwiZ2VuZXJhdGVDYXJkIiwiY2FyZExpc3QiLCJhZGRJdGVtIiwicmVuZGVySXRlbXMiLCJlZGl0UHJvZmlsZVBvcHVwIiwic2V0VXNlckluZm8iLCJ1c2VyRGF0YSIsImdldFVzZXJJbmZvIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRDYXJkUG9wdXAiLCJjb250YWluZXJTZWxlY3RvciIsInByZXBlbmQiLCJmb3JtcyIsImZvcm1BZGRMb2NhbCIsImVuYWJsZVZhbGlkYXRpb24iLCJmb3JtRWRpdFByb2ZpbGUiXSwic291cmNlUm9vdCI6IiJ9